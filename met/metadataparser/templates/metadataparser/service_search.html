{% extends "metadataparser/base_metadataparser.html" %}
{% load i18n metadataparsertags %}

{% block appendheader %}
<h2>{% trans "Service search" %}</h2>
{% endblock %}

{% block content %}

{% bootstrap_searchform searchform %}

{% trans "total results" %} {{ object_list|length }}
{% if object_list %}

<table class="table table-stripped">
  <thead>
    <tr>
      <th>EntityID</th>
      <th>Type</th>
      <th>Federations</th>
    </tr>
  </thead>
  <tbody>
  {% for entity in object_list %}
  <tr>
    <td>
      <a title="{{ entity|default:entity.entityid }}"
         href="{{ entity.get_absolute_url }}">{{ entity|default:entity.entityid|wrap:50 }}</a>
    </td>
    <td>
      {{ entity.types|display_etype }}
    </td>
    <td>
    {% for federation in entity.federations.all %}
    <a href="{{ federation.get_absolute_url }}">{{ federation }}</a> {% if not forloop.last %}|{% endif %}
    {% endfor %}
    </td>
  </tr>
  {% endfor %}
  </tbody>
</table>



<div class="btn-group pull-right">
  <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
      {% trans "Export" %}
      <span class="caret"></span>
  </a>
  <ul class="dropdown-menu">
    <li><a href="{% url search_service_export "csv" %}?entityid={{ entity.entityid }}">{% trans "csv" %}</a></li>
    <li><a href="{% url search_service_export "json" %}?entityid={{ entity.entityid }}">{% trans "json" %}</a></li>
  </ul>
</div>

{% endif %}

{% endblock %}
